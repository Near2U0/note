[toc]

# 全局描述符表

在保护模式下，对内存的访问仍然使用段地址和偏移地址的方式，但是在每个段能够访问之前，必须进行登记，当你访问的偏移地址超过段的界限时，处理器就会阻止这种访问，并产生一个叫内部异常的终端

所有的段描述符放在一起构成了个描述符表，如果是在全局，那么称为全局描述符表(GDT, Global Descriptor Table)

* 全局描述符寄存器（GDTR,Global Descriptor Table Register):48位

  * 32位保存全局描述符表的起始位置

  * 16位全局描述符表的边界，其数值大小等于表的大小减一

    ![](/Users/chenyansong/Documents/note/images/linux/x86/image-20191227202515199.png)

* 由于在实模式下只能访问1M内存，故GPT通常都定义在1M以下的内存空间范围中，当然在进入保护模式之后，可以换个位置重新定义GDT

  ![image-20191227204423168](/Users/chenyansong/Documents/note/images/linux/x86/image-20191227204423168.png)



# 段描述符

* 程序加载到内存的位置

  ![image-20191227205154014](/Users/chenyansong/Documents/note/images/linux/x86/image-20191227205154014.png)

  

8个字节的描述符的格式

![image-20191228103202522](/Users/chenyansong/Documents/note/images/linux/x86/image-20191228103202522.png)

1. 32位的段起始地址和20位的段界限

   在实模式下，32的段地址要左移4位，然后加上偏移，但是在保护模式下，如果未开启分页，该线性地址就是物理地址

   20的段界限，决定了段内偏移的最大值

2. TYPE字段共4位，用指示描述符的子类型或者说类型

   ![](/Users/chenyansong/Documents/note/images/linux/x86/image-20191228105106094.png)

   

# 安装段描述符并加载到GDTR



