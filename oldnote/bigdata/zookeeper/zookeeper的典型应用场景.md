---
title: zookeeper的典型应用场景
categories: hadoop   
tags: [zookeeper]
---




# 1.数据发布/订阅
数据发布/订阅即所谓的**配置中心**：发布者将数据发布到zk的一个或者一系列节点上，阅者进行数据订阅，当数据有变化时，可以及时得到数据的变化通知

因为应用B对zk的某一个节点进行了监听（watch） ，所以当应用A向该监听的节点发布数据的时候（即节点的数据发生变化），此时会触发监听，然后就会通知应用B（即订阅的过程）,这就相当于一个开关的作用（虽然可以在配置文件中配置，但是我们通过zk去配置，并且能够进行及时的触发（watcher机制））




# 2.负载均衡
本质是利用zookeeper的配置管理功能，涉及的步骤为：
1. 服务提供者把自ٜ的域名及IP 端口的映射注册到zk中
2. 服务消费者通过域名从zk中获取到对应的IP及端口，这个IP及端口有多个，只是获取其中一个
3. 当服务提供者宕机时，对应的域名与IP的对应就会减少一个映射
4. 阿里的dubbo服务框架就是基于zk来实现服务路由和负载


# 3.命令服务
&emsp;在分布式系统中，服务命令（Name Service）也是很重要的应用场景，通过zk也可以实现类似于J2EE中的JNDI的
效果；分布式环境中，命令服务更多的是资源定位，并不是真正的实体资源，其本质是用到zk的其中配置管理和<font color=red>查找</font>


# 4.分布式协调和通知
1. 通过watcher和通知机制实现
2. 分布式锁
3. 分布式事务


# 5.集群管理
1. 当前集群中的机器数量
2. 集群中的机器的运行时状态
3. 集群中节点的上下线操作
4. 集群节点的统一配置

# 6.Master选举
1. 临时节点
2. 顺序节点



# 7.分布式锁
1. 排他锁
2. 共享锁

# 8.分布式队列
FIFO

