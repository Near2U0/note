[TOC]

# hdlc协议

serial 同步串口需要在实验室环境下，需要有一端的路由器提供接口时钟频率，同步的含义：在于两端具有相同的时钟频率

路由器（DTE）------ 路由器（DTE，没法通信）

路由器（DTE）------ 路由器（DCE，提供接口时钟频率）



在实际网络环境中，不需要路由器提供接口的时钟频率

路由器（DTE）-----DCE（提供接口时钟频率）------DCE（提供接口时钟频率）--------路由器（DTE）



路由器出厂时，默认情况下，serial接口采用hdlc封装

```shell
#配置路由A
config t
hostname C2811a

interface serial 0/0/0
ip address 192.168.1.1 255.255.255.0
#数据链路层封装为hdlc
encapsulation hdlc
no shutdown


#配置路由B
config t
hostname c2811b
interface serial 0/0/0
ip address 192.168.1.2 255.255.255.0
encapsulation hdlc
#设置接口时钟频率
clock rate 64000
no shutdown
```



```shell
#查看
show interfacce serial 0/0/0
```

![image-20190829220234674](/Users/chenyansong/Documents/note/images/computeNetwork/image-20190829220234674.png)

![image-20190829220547924](/Users/chenyansong/Documents/note/images/computeNetwork/image-20190829220547924.png)



# PPP协议

路由器出厂时，默认serial接口采用的是数据链路层hdlc封装，可以修改为ppp封装，修改为ppp封装之后，可以采用ppp的pap验证或chap验证，pap验证使用的是明文传递，2次握手，而chap验证是密文传递，3次握手

## 使用pap验证

![image-20190829221519840](/Users/chenyansong/Documents/note/images/computeNetwork/image-20190829221519840.png)



```shell
config t
hostname c2811a
username c2811a password c2811apwd

config t
hostname c2811b
username c2811b password c2811bpwd


interface serial 0/0/0
ip address 192.168.1.1 255.255.255.0
#指定链路封装的协议
encapsulation ppp
ppp authentication pap
#指定对端路由器的用户名和密码
ppp pap sent-username c2811b password c2811bpwd
no shutdown

interface serial 0/0/0
ip address 192.168.1.2 255.255.255.0
encapsulation ppp
ppp authentication pap
ppp pap sent-username c2811a password c2811apwd
no shutdown

#此时我们ping对端是可以ping通的
```

查看配置

```shell
show interface serial 0/0/0
```

![image-20190829221744881](/Users/chenyansong/Documents/note/images/computeNetwork/image-20190829221744881.png)



## 使用chap验证

![image-20190829224701006](/Users/chenyansong/Documents/note/images/computeNetwork/image-20190829224701006.png)

```shell
config t
hostname c2811a
username c2811b password cisco

config t
hostname c2811b
#使用对端的用户名和两端都一样的协议
username c2811a password cisco


interface serial 0/0/0
ip address 192.168.1.1 255.255.255.0
#指定链路封装的协议
encapsulation ppp
ppp authentication chap
no shutdown

interface serial 0/0/0
ip address 192.168.1.2 255.255.255.0
encapsulation ppp
ppp authentication chap
no shutdown

#此时我们ping对端是可以ping通的
```

查看接口情况

![image-20190829224349575](/Users/chenyansong/Documents/note/images/computeNetwork/image-20190829224349575.png)



# Frame Relay协议封装配置

