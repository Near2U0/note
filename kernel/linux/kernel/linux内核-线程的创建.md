[toc]

总结以下进程和线程的异同点：

1. 进程有独立的内存空间，比如代码段，数据段。线程则是共享进程的内存空间。
2. 在创建新进程的时候，会将父进程的所有五大数据结构复制新的，形成自己新的内存空间数据，而在创建新线程的时候，则是**引用**进程的五大数据结构数据，**但是线程会有自己的私有（局部）数据，执行栈空间**。
3. 进程和线程其实在cpu看来都是task_struct结构的一个封装，执行不同task即可，而且在cpu看来就是在执行这些task时候遵循对应的调度策略以及上下文资源切换定义，包括寄存器地址切换，内核栈切换，指令指针寄存器的地址切换。所以对于cpu而言，进程和线程是没有区别的。
4. 进程创建的时候直接使用系统调用fork，进行系统调用的链路走，从而进入到_do_fork去创建task，而线程创建在调用_do_fork之前，**还需要维护pthread这个数据结构的信息，初始化用户态栈信息**。

![](../../images/linux/kernel/14635b1613d04df9f217c3508ae8524b.jpeg)